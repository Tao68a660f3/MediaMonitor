<Window x:Class="MediaMonitor.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="SMTC 媒体监控 &amp; 歌词助手" Height="520" Width="450" Background="#F3F3F3">
    <Grid Margin="20">
        <StackPanel>
            <TextBlock Text="选择媒体源:" FontWeight="Bold" Margin="0,0,0,5"/>
            <ComboBox x:Name="ComboSessions" 
                      DisplayMemberPath="SourceAppUserModelId" 
                      SelectionChanged="ComboSessions_SelectionChanged" 
                      Margin="0,0,0,20"/>

            <Border Background="White" CornerRadius="8" Padding="15">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="10" Color="#CCCCCC" Direction="270" ShadowDepth="2" Opacity="0.5"/>
                </Border.Effect>
                <StackPanel>
                    <TextBlock x:Name="TxtTitle" Text="暂无播放" FontSize="22" FontWeight="Bold" TextTrimming="CharacterEllipsis"/>
                    <TextBlock x:Name="TxtArtist" Text="-" FontSize="16" Foreground="#666666" Margin="0,5,0,0"/>
                    <TextBlock x:Name="TxtAlbum" Text="-" FontSize="12" Foreground="#999999" Margin="0,2,0,10"/>

                    <Grid>
                        <TextBlock x:Name="TxtStatus" Text="状态: Stopped" VerticalAlignment="Center"/>
                        <TextBlock x:Name="TxtTime" Text="00:00 / 00:00" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                    </Grid>

                    <ProgressBar x:Name="PrgBar" Height="8" Margin="0,10,0,0" Foreground="#0078D4" Background="#E5E5E5" BorderThickness="0"/>

                    <TextBlock x:Name="TxtLyricDisplay" Text="等待播放..." FontSize="20" FontWeight="Bold" Foreground="#0078D4" TextAlignment="Center" TextWrapping="Wrap"/>
                    <TextBlock x:Name="TxtLyricTranslation" Text="" FontSize="14" Foreground="#666666" TextAlignment="Center" TextWrapping="Wrap" Margin="0,2,0,5"/>
                    <TextBlock x:Name="TxtNextLyric" Text="" FontSize="12" Foreground="#999999" TextAlignment="Center" Opacity="0.7"/>
                </StackPanel>
            </Border>

            <Expander Header="歌词搜索设置" Margin="0,15,0,0" IsExpanded="True" Background="Transparent">
                <Border Background="#E9E9E9" CornerRadius="5" Padding="10" Margin="0,5,0,0">
                    <StackPanel>
                        <TextBlock Text="歌词文件夹路径:" FontWeight="SemiBold"/>
                        <DockPanel Margin="0,5">
                            <Button x:Name="BtnBrowse" Content=" 浏览... " DockPanel.Dock="Right" Click="BtnBrowse_Click" Margin="5,0,0,0"/>
                            <TextBox x:Name="TxtLrcPath" Text="C:\Lyrics" VerticalAlignment="Center" Padding="3"/>
                        </DockPanel>

                        <TextBlock Text="文件名匹配模式 (分号隔开):" FontWeight="SemiBold" Margin="0,5,0,0"/>
                        <TextBox x:Name="TxtPatterns" Text="{}{Artist} - {Title};{Title} - {Artist};{Title}" Margin="0,5,0,0" Padding="3"/>

                        <Separator Margin="0,10"/>

                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="匹配结果: " FontWeight="Bold"/>
                            <TextBlock x:Name="TxtLrcStatus" Text="等待匹配..." Foreground="Gray"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </Expander>

            <TextBlock Text="提示：切换媒体源后将自动开始搜索歌词" Margin="0,20,0,0" Foreground="Gray" FontSize="11" HorizontalAlignment="Center"/>
        </StackPanel>
    </Grid>
</Window>