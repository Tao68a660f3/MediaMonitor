<Window x:Class="MediaMonitor.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="媒体同步控制中心 V1.2" Height="800" Width="500" Background="#F3F3F3">
    <Grid Margin="15">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <TextBlock Text="选择媒体源:" FontWeight="Bold" Margin="0,0,0,5"/>
                <ComboBox x:Name="ComboSessions" DisplayMemberPath="SourceAppUserModelId" SelectionChanged="ComboSessions_SelectionChanged" Margin="0,0,0,15"/>

                <Border Background="White" CornerRadius="8" Padding="15">
                    <Border.Effect>
                        <DropShadowEffect BlurRadius="10" Color="#CCCCCC" Direction="270" ShadowDepth="2" Opacity="0.5"/>
                    </Border.Effect>
                    <StackPanel>
                        <TextBlock x:Name="TxtTitle" Text="暂无播放" FontSize="22" FontWeight="Bold" TextTrimming="CharacterEllipsis"/>
                        <TextBlock x:Name="TxtArtist" Text="-" FontSize="16" Foreground="#666666" Margin="0,5,0,0"/>
                        <TextBlock x:Name="TxtAlbum" Text="-" FontSize="12" Foreground="#999999" Margin="0,2,0,0"/>

                        <ProgressBar x:Name="PrgBar" Height="8" Margin="0,15,0,5" Foreground="#2196F3"/>
                        <Grid>
                            <TextBlock x:Name="TxtStatus" Text="状态: -" FontSize="11" Foreground="Gray"/>
                            <TextBlock x:Name="TxtTime" Text="00:00 / 00:00" FontSize="11" Foreground="Gray" HorizontalAlignment="Right"/>
                        </Grid>

                        <Separator Margin="0,10"/>
                        <TextBlock x:Name="TxtLyricDisplay" Text="..." FontSize="18" Foreground="#2196F3" TextAlignment="Center" FontWeight="SemiBold"/>
                        <TextBlock x:Name="TxtLyricTranslation" Text="" FontSize="14" Foreground="#666666" TextAlignment="Center" Margin="0,5,0,0"/>
                        <TextBlock x:Name="TxtNextLyric" Text="" FontSize="12" Foreground="#AAAAAA" TextAlignment="Center" Margin="0,10,0,0"/>
                    </StackPanel>
                </Border>

                <Expander Header="串口与显示策略" IsExpanded="True" Margin="0,15">
                    <Border Background="#E9E9E9" CornerRadius="5" Padding="10">
                        <StackPanel>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition/>
                                    <ColumnDefinition/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Margin="0,0,5,0">
                                    <TextBlock Text="串口号:"/>
                                    <ComboBox x:Name="ComboPorts" Margin="0,2"/>
                                    <TextBlock Text="波特率:"/>
                                    <ComboBox x:Name="ComboBaud" Margin="0,2">
                                        <ComboBoxItem Content="9600"/>
                                        <ComboBoxItem Content="115200" IsSelected="True"/>
                                    </ComboBox>
                                </StackPanel>
                                <StackPanel Grid.Column="1" Margin="5,0,0,0">
                                    <TextBlock Text="文本编码:"/>
                                    <ComboBox x:Name="ComboEncoding" Margin="0,2">
                                        <ComboBoxItem Content="UTF8"/>
                                        <ComboBoxItem Content="GB2312"/>
                                    </ComboBox>
                                    <Button x:Name="BtnSerialConn" Content="连接串口" Margin="0,12,0,0" Height="28" Click="BtnSerialConn_Click"/>
                                </StackPanel>
                            </Grid>

                            <Separator Margin="0,10"/>

                            <StackPanel Orientation="Horizontal">
                                <CheckBox x:Name="ChkAdvancedMode" Content="协议模式" IsChecked="True" VerticalAlignment="Center"/>
                                <CheckBox x:Name="ChkIncremental" Content="增量发送" IsChecked="True" VerticalAlignment="Center" Margin="15,0,0,0"/>
                                <CheckBox x:Name="ChkTransOccupies" Content="翻译占行" IsChecked="True" VerticalAlignment="Center" Margin="15,0,0,0"/>
                            </StackPanel>

                            <Grid Margin="0,8,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition/>
                                    <ColumnDefinition/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="屏幕行数:" VerticalAlignment="Center"/>
                                    <TextBox x:Name="TxtScreenLines" Text="3" Width="30" Margin="5,0,0,0" TextAlignment="Center"/>
                                </StackPanel>
                                <StackPanel Grid.Column="1" Orientation="Horizontal">
                                    <TextBlock Text="当前行偏移:" VerticalAlignment="Center"/>
                                    <TextBox x:Name="TxtOffset" Text="1" Width="30" Margin="5,0,0,0" TextAlignment="Center"/>
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </Border>
                </Expander>

                <Expander Header="歌词搜索设置" Margin="0,0,0,15">
                    <Border Background="#E9E9E9" CornerRadius="5" Padding="10">
                        <StackPanel>
                            <TextBlock Text="歌词路径:"/>
                            <DockPanel Margin="0,5">
                                <Button Content=" 浏览 " Click="BtnBrowse_Click" DockPanel.Dock="Right" Margin="5,0,0,0"/>
                                <TextBox x:Name="TxtLrcPath" Text="C:\Lyrics" VerticalAlignment="Center"/>
                            </DockPanel>
                            <TextBlock Text="匹配模式 (分号隔开):"/>
                            <TextBox x:Name="TxtPatterns" Text="{}{Artist} - {Title};{Title} - {Artist};{Title}" Margin="0,5"/>
                            <TextBlock x:Name="TxtLrcStatus" Text="状态: 等待匹配" Foreground="Gray" FontSize="11"/>
                        </StackPanel>
                    </Border>
                </Expander>

                <TextBlock Text="数据流预览 (HEX):" FontWeight="Bold"/>
                <RichTextBox x:Name="HexPreview" Height="120" Background="#1E1E1E" FontFamily="Consolas" IsReadOnly="True" VerticalScrollBarVisibility="Auto" Margin="0,5"/>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Window>